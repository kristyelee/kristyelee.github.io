<!DOCTYPE html>
<!--
    Plain-Academic by Vasilios Mavroudis
    Released under the  Simplified BSD License/FreeBSD (2-clause) License.
    https://github.com/mavroudisv/plain-academic
-->

<html lang="en">

<head>
    <title>CS 194-26 Final Project: Kristy Lee</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script> -->
    <!-- <link href='https://fonts.googleapis.com/css?family=Oswald:700' rel='stylesheet' type='text/css'>-->
</head>


<body>
    <!-- Page Content -->
    <div class="container">
        <div class="row">
            <!-- Entries Column -->
            <div class="col-md-8" style="min-height: 100vh; height: auto;">
                <!-- <img class="img-responsive" src="banner.jpg" alt=""><br> -->
                <h1>CS 194-26 Final Project Report</h1>
                <div class="col-md-4">
                    <h2><p>Kristy Lee</p></h2>
                    <p><b>kristylee@berkeley.edu</b></p>
                    <p>
                        For my final project, I decided to work on the Light Field Camera and Image Quilting Projects.
                    </p>
                </div>
            <div style="margin-top:3%; text-align:left;">
                    <h2>Light Field Camera</h2>
                    <p>The Light Field Camera project is inspired by the "Light Field Photography with a Hand-held Plenoptic Camera" paper by Ng et. al. Multiple effects on photo can be achieved after capturing multiple photos of the same object at slightly different views by using shifting and averaging.</p>
                    
                    <h3>Depth Refocusing</h3>
                    <p>
                        Depth refocusing involves using all the grid images to simulate a camera at different depths through operations like shifting and averaging. The images are organized into a 17x17 grid for the chessboard and the center image is the 8x8 image. For simulating the camera at different depths, I shifted all images in the grid to the center image by taking differences in the camera coordinates (grid position) relative to the center image's camera coordinates: for x, I calculate shift using image_x_position - 8 (8 is the center) and for y, I calculate shift using 8 - image_y_position. Then, once I have obtained the x and y shifts for a particular image, I scale the shifts by a value C to add refocusing effects. Then after shifting (by the scaled shifts) all images to the center image, I average all the images.
                    </p>

                    <p>
                        First, without shifting, here is the photo generated by averaging all chessboard images:
                    </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/averaged_image.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Averaged Image</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <p>Here are the results of depth refocusing on the chessboard: </p>
                    
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_-2.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = -2</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_-1.5.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = -1.5</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_-1.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = -1</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_-0.5.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = -0.5</figcaption> 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = 0</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_0.5.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = 0.5</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_1.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = 1</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_2.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = 2</figcaption> 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_3.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = 3</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_4.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = 4</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_5.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">C = 5</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <p>One thing noticeable here is that when we use lower values of C, the focus of the camera tends to be on objects further away, while when we use higher values of C, the focus of the camera tends to be on objects closer. Here's a .gif that goes through the different C values in order: </p> 
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing.gif" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Depth Refocusing Chessboard</figcaption> 
                            </td>
                            
                        </tr>
                    </table>

                    <h3>Aperture Adjustment</h3>
                    <p>
                        Aperture Adjustment involves selecting grid images whose distance from the center image fall within a certain radius, and shifting all those images to the center image after applying a scale C = 1.5 to the shifts. Then after shifting all images to the center image, I average all the images. Here are the results on the chessboard: 
                    </p>
                    
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/aperture_adjustment_0.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 0</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_1.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 1</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_2.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 2</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_3.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 3</figcaption> 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/aperture_adjustment_4.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 4</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_5.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 5</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_6.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 6</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_7.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 7</figcaption> 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/aperture_adjustment_8.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 8</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_9.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 9</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_10.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 10</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_11.0.png" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Radius = 11</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <p>Here's a .gif that goes through the different radius values in order to display aperture adjustment: </p> 
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/aperture_adjustment.gif" alt="Cameraman Convolved with D_x" style="width:350px;height:200px;"/>
                                <figcaption align="center">Aperture Adjustment Chessboard</figcaption> 
                            </td>
                            
                        </tr>
                    </table>

                    <h3>Another Example</h3>
                    <p>Here's a similar example using jellybeans on a 17x17 grid:</p>
                    <table align="center">

                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_-2.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = -2</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_-1.5.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = -1.5</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_-1.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = -1</figcaption> 
                            </td>
                            
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_-0.5.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = -0.5</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = 0</figcaption> 
                            </td>
                            
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_0.5.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = 0.5</figcaption> 
                            </td>
                            
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_1.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = 1</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_2.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = 2</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_3.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = 3</figcaption> 
                            </td>
                            
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_4.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = 4</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean_5.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">C = 5</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <p>Here are the results of depth refocusing on the jellybean: </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/depth_refocusing_jellybean.gif" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Depth Refocusing Jellybean</figcaption> 
                            </td>
                            
                        </tr>
                    </table>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_0.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 0</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_1.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 1</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_2.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 2</figcaption> 
                            </td>
                            </tr><tr>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_3.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 3</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_4.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 4</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_5.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 5</figcaption> 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_6.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 6</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_7.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 7</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_8.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 8</figcaption> 
                            </td>
                        </tr>
                        <tr>
                            
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_9.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 9</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_10.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 10</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean_11.0.png" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Radius = 11</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <p>Here's a .gif that goes through the different radius values in order for aperture adjustment: </p> 
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/aperture_adjustment_jellybean.gif" alt="Cameraman Convolved with D_x" style="width:512px;height:256px;"/>
                                <figcaption align="center">Aperture Adjustment Jellybean</figcaption> 
                            </td>
                            
                        </tr>
                    </table>
                    <h3>Bells & Whistles</h3>
                    <p>I attempted to perform the light field camera depth refocusing and aperture adjustment on some images of a tissue box taken at various angles. I used a 5x5 grid for the tissue boxes, and the center image is the (2,2)th image (0 indexed). You can find the images in this <a href='https://drive.google.com/drive/folders/14zMB28zNLEWvSSRLEB_koRIvwoNpyP4r?usp=sharing'>Google Drive folder</a>. My result is not perfect but this is an attempt. Depth refocusing showed some blurry flashes but noticeable color changes. Aperture adjustment worked as expected: as radius gets larger, the image gets blurrier. Here are the top left, center, and bottom right images. </p>
                    <table>
                    <tr>
                        <td>
                            <img src="images_final/IMG_0033.jpg" alt="Cameraman Convolved with D_x" style="width:400px;height:300px;"/>
                            <figcaption align="center">Top Left (0,0)th image</figcaption> 
                        </td>
                        <td>
                            <img src="images_final/IMG_0045.jpg" alt="Cameraman Convolved with D_x" style="width:400px;height:300px;"/>
                            <figcaption align="center">Center (2,2)th image</figcaption> 
                        </td>
                        <td>
                            <img src="images_final/IMG_0057.jpg" alt="Cameraman Convolved with D_x" style="width:400px;height:300px;"/>
                            <figcaption align="center">Bottom Right (4,4)th image</figcaption> 
                        </td>
                    </tr>
                </table>
                <p>Here are the depth refocusing and aperture adjustment gifs (used YouTube Videos instead of displaying actual gifs) </p>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/UgMNQiQ12ws" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    <p>(The video link in case): <a href='https://www.youtube.com/watch?v=UgMNQiQ12ws'>https://www.youtube.com/watch?v=UgMNQiQ12ws</a>. Depth Refocusing.</p>
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/BvTEixM5r0Q" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    <p>(The video link in case): <a href='https://www.youtube.com/watch?v=BvTEixM5r0Q'>https://www.youtube.com/watch?v=BvTEixM5r0Q</a>. Aperture Adjustment.</p>
                    <h3>Summary</h3>
                    <p>
                        I learned about how multiple images of the same object taken at different viewpoints over a grid can be used to mimic camera depth refocusing and aperture adjustment. I learned how scaling shifts can be important for bringing focus to different areas of an image.
                    </p>


                    <h2>Image Quilting</h2>
                    <p>The image quilting project is inspired by the SIGGRAPH 2001 paper by Efros and Freeman, "Image Quilting for Texture Synthesis and Transfer" and implements the image quilting algorithm in multiple phases. I first look at randomly sampling texture to create an image quilt, and then using overlapping patches to create an image quilt. Then, I look at finding precise seams in the overlapping regions between patches in order to stitch patches together to form the image quilt, and finally I implement a texture transfer algorithm to transfer corresponding patches onto a target image's figure. </p>
                    <p>Here are the textures I look at in this project: </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/bricks_small.jpg" alt="Cameraman Convolved with D_x" style="width:192px;height:192px;"/>
                                <figcaption align="center">Bricks Small</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/feyman.png" alt="Cameraman Convolved with D_x" style="width:271px;height:355px;"/>
                                <figcaption align="center">Feynman</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/sketch.png" alt="Cameraman Convolved with D_x" style="width:227px;height:375px;"/>
                                <figcaption align="center">Sketch</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/text_small.jpg" alt="Cameraman Convolved with D_x" style="width:108px;height:106px;"/>
                                <figcaption align="center">Text Small</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/white_small.jpg" alt="Cameraman Convolved with D_x" style="width:85px;height:76px;"/>
                                <figcaption align="center">White Small</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <h3>Randomly Sampled Texture</h3>
                    <p>
                        For this part, given a source image, I randomly sample patches (sampling with replacement applies) from a large set of patches I have generated from the source image and then tile an output image with those patches. Here are the randomly sampled textures I've produced: 
                    </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/bricks_smal_quilt_random.png" alt="Cameraman Convolved with D_x" style="width:192px;height:192px;"/>
                                <figcaption align="center">Bricks Small Quilt with Random Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/feynman_quilt_random.png" alt="Cameraman Convolved with D_x" style="width:271px;height:355px;"/>
                                <figcaption align="center">Feynman Quilt with Random Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/sketch_quilt_random.png" alt="Cameraman Convolved with D_x" style="width:227px;height:375px;"/>
                                <figcaption align="center">Sketch Quilt with Random Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/text_smal_quilt_random.png" alt="Cameraman Convolved with D_x" style="width:108px;height:106px;"/>
                                <figcaption align="center">Text Small Quilt with Random Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/white_smal_quilt_random.png" alt="Cameraman Convolved with D_x" style="width:85px;height:76px;"/>
                                <figcaption align="center">White Small Quilt with Random Patches</figcaption> 
                            </td>
                        </tr>
                    </table>

                    <h3>Overlapping Patches</h3>
                    <p>
                        For this part, given a sample texture I populate the output image in the following manner: for the top left corner, I choose a patch at random, and then each subsequent patch will have an overlap either at the top or left or both top and left. To populate the overlapping patches in the output image, for each position of the output image I examine the overlap region of the output image that I'm currently generating, and I go through all the patches, compute the ssd between the patch overlap region and the output image overlap region (using a function I defined called <code>ssd_patch</code>), and select one patch randomly from the patches that fit the constraint that its SSD < (lowest SSD * (1+tol)), where I define tol = 0.0001. I perform the aforementioned patch selection process in the <code>choose_sample</code> function I've coded. Once I selected the patch, I replaced the output image's overlap region with (output image's overlap region + patch's overlap region) / 2, and then fill the rest of the output image with the remainder of the patch. Note that if there is a top and left overlap involved when patching, my ssd computation would involve both the top and left overlap of the patch with the overlap of the generated output image. Here are the resulting textures from overlapping patches. If you zoom in, you can see the patches more clearly defined but they look like they integrate more smoothly than in the randomly sampled case (obviously): 
                    </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/bricks_smal_overlapped_patches.png" alt="Cameraman Convolved with D_x" style="width:192px;height:192px;"/>
                                <figcaption align="center">Bricks Small Quilt with Overlapped Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/feynman_overlapped_patches.png" alt="Cameraman Convolved with D_x" style="width:271px;height:355px;"/>
                                <figcaption align="center">Feynman Quilt with Overlapped Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/sketch_overlapped_patches.png" alt="Cameraman Convolved with D_x" style="width:227px;height:375px;"/>
                                <figcaption align="center">Sketch Quilt with Overlapped Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/text_smal_overlapped_patches.png" alt="Cameraman Convolved with D_x" style="width:108px;height:106px;"/>
                                <figcaption align="center">Text Small Quilt with Overlapped Patches</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/white_smal_overlapped_patches.png" alt="Cameraman Convolved with D_x" style="width:85px;height:76px;"/>
                                <figcaption align="center">White Small Quilt with Overlapped Patches</figcaption> 
                            </td>
                        </tr>
                    </table>

                    <h3>Seam Finding</h3>
                    <p>
                        Here, we perform a similar computation with SSD and tol (set tol=0.001 for this section) as stated above to select patches in order to find one of the best patches to overlap with the generated output image following the procedure described above. However, once the patch is selected, we don't just compute (output image's overlap region + patch's overlap region) / 2 to fill the overlap portion of the output image. Instead, we compute a cut through the overlapping region to find the min-cost contiguous path mask through the overlapping region that would dictate which pixels of the overlap region the generated output image's overlap region would contribute to and which pixels of the overlap region the patch's overlap region would contribute to. We compute the min-cost contiguous path cut through examining the error patch (each pixel of the error patch is the corresponding difference between one pixel of the output image's overlap region and one pixel of the patch's overlap region). The <code>customized_cut</code> function finds the min-cost contiguous path from left to right, but if the overlap is along a vertical edge, I would compute the cut mask on the transpose of the err_patch, then transpose the cut mask again to gain the correct orientation. If there are top and left overlaps, then I would obtain both cut masks and intersect them to form one whole mask for the top and left overlaps. Here are some example masks:
                    </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/mask_0_17.png" alt="Cameraman Convolved with D_x" style="width:60px;height:400px;"/>
                                <figcaption align="center">Mask</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/mask_17_0.png" alt="Cameraman Convolved with D_x" style="width:400px;height:60px;"/>
                                <figcaption align="center">Mask</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/mask_0_51.png" alt="Cameraman Convolved with D_x" style="width:60px;height:400px;""/>
                                <figcaption align="center">Mask</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/mask_68_0.png" alt="Cameraman Convolved with D_x" style="width:400px;height:60px;"/>
                                <figcaption align="center">Mask</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <p>
                        After using the masks, the boundaries between patches are distinct paths: for example, here, you can see that the cut is not linear but instead a distinct path:
                    </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/seam.png" alt="Cameraman Convolved with D_x" style="width:600px;height:178px;"/>
                                <figcaption align="center">Seam Bricks</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/seam_drawn.jpg" alt="Cameraman Convolved with D_x" style="width:600px;height:178px;"/>
                                <figcaption align="center">Seam Bricks Drawn</figcaption> 
                            </td>
                        </tr>
                    </table>

                    <p> For a specific example of mask, cost (squared difference) (https://docs.google.com/document/d/1Tcl8Vu3egsqBiH12ID_eaPXydLxmglnS3FVB0oRZy_E/edit), and corresponding two patches, see the following: </p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/mask_0_14.png" alt="Cameraman Convolved with D_x" style="width:11px;height:25px;"/>
                                <figcaption align="center">Mask</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/im.png" alt="Cameraman Convolved with D_x" style="width:25px;height:25px;"/>
                                <figcaption align="center">Patch 1</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/patch.png" alt="Cameraman Convolved with D_x" style="width:25px;height:25px;"/>
                                <figcaption align="center">Patch 2</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/combo.png" alt="Cameraman Convolved with D_x" style="width:39px;height:25px;"/>
                                <figcaption align="center">Combo of Patches</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <p>
                       Here are the generated output image quilts from deriving cuts that are min-cost contiguous paths between adjacent patches rather than blocked-out overlaps. I defined a <code>quilt-cut</code> function that outputs the quilt.
                    </p>

                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/bricks_smal_seam_finding.png" alt="Cameraman Convolved with D_x" style="width:192px;height:192px;"/>
                                <figcaption align="center">Bricks Small Quilt with Seams</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/feynman_seam_finding.png" alt="Cameraman Convolved with D_x" style="width:271px;height:355px;"/>
                                <figcaption align="center">Feynman Quilt with Seams</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/sketch_seam_finding.png" alt="Cameraman Convolved with D_x" style="width:227px;height:375px;"/>
                                <figcaption align="center">Sketch Quilt with Seams</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/text_smal_seam_finding.png" alt="Cameraman Convolved with D_x" style="width:108px;height:106px;"/>
                                <figcaption align="center">Text Small Quilt with Seams</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/white_smal_seam_finding.png" alt="Cameraman Convolved with D_x" style="width:85px;height:76px;"/>
                                <figcaption align="center">White Small Quilt with Seams</figcaption> 
                            </td>
                        </tr>
                    </table>

                    <p>The resulting quilts here have smoother transitions in texture than the quilts produced by overlapping patches without finding precise seams.</p>

                    <p>Other examples:</p>
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/blackbricks.jpg" alt="Cameraman Convolved with D_x" style="width:250px;height:179px;"/>
                                <figcaption align="center">Black Bricks</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/blackbrick_seam_finding.png" alt="Cameraman Convolved with D_x" style="width:250px;height:179px;"/>
                                <figcaption align="center">Black Bricks Quilt with Seams</figcaption> 
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img src="images_final/stone.jpg" alt="Cameraman Convolved with D_x" style="width:275px;height:183px;"/>
                                <figcaption align="center">Stones</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/ston_seam_finding.png" alt="Cameraman Convolved with D_x" style="width:275px;height:183px;"/>
                                <figcaption align="center">Stones Quilt with Seams</figcaption> 
                            </td>
                           
                        </tr>
                    </table>

                    <h3>Texture Transfer</h3>
                    <p>
                        Now, in this part we try to transfer patches of texture from a source image onto a target image, where the target image dictates the pattern that we want to match with the patches. To perform the following operation, I basically perform the same operations as I've done in the seam-finding section (for determining the boundaries between patches). However, to account for texture transfer the SSD calculation is updated in the following way: we calculate two SSDs - one between the overlapping regions of the output (patched) image and the patch and one between the patch and the corresponding region of the target image. We use a weight term \(\alpha\) to place weight on both SSDs to produce the final SSD that would contribute to the choosing the patch in <code>choose_sample</code>. In <code>choose_sample</code> and <code>ssd_patch</code>, I used \(\alpha = 0.1\) and computed SSD = \(\alpha\) * SSD_overlap + \(1 - \alpha\) SSD_guidance_im for each candidate patch and select one patch randomly from the patches that fit the constraint that its SSD < (lowest SSD * (1+tol)), where I use tol=0.001. The reason why SSD_guidance_im is a useful measure is because patches that are similar to the target image's region will have less difference in pixel colors (and thus pixel values) than dissimilar patches, so it makes sense to minimize the SSD in this context. Here are some example texture transfer images:
                    </p>
                    
                    <table align="center">
                        <tr>
                            <td>
                                <img src="images_final/feyman.jpg" alt="Cameraman Convolved with D_x" style="width:271px;height:355px;"/>
                                <figcaption align="center">Feynman</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/bricks_smal_texture_transfer.png" alt="Cameraman Convolved with D_x" style="width:271px;height:355px;"/>
                                <figcaption align="center">Bricks Texture Transfer</figcaption> 
                            </td>
                        </tr>
                        </table>
                    <p>Some of the lighter patches are gathered around in such a manner as to represent the man's face.</p>
                    <p>Here are other examples where the object is distinct against the background: </p>
                    <table>
                            <tr>
                            <td>
                                <img src="images_final/banana-big.jpg" alt="Cameraman Convolved with D_x" style="width:450px;height:230px;"/>
                                <figcaption align="center">Banana</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/bricks_smal_texture_transfer_banana.png" alt="Cameraman Convolved with D_x" style="width:450px;height:230px;"/>
                                <figcaption align="center">Bricks Texture Transfer</figcaption> 
                            </td>
                            </tr>
                            <tr> 
                                <td>
                                <img src="images_final/sketch_texture_transfer.png" alt="Cameraman Convolved with D_x" style="width:450px;height:230px;"/>
                                <figcaption align="center">Sketch Texture Transfer</figcaption> 
                            </td>
                            <td>
                                <img src="images_final/white_smal_texture_transfer.png" alt="Cameraman Convolved with D_x" style="width:450px;height:230px;"/>
                                <figcaption align="center">White Small Texture Transfer</figcaption> 
                            </td>
                        </tr>
                    </table>
                    <table>
                        <tr>
                        <td>
                            <img src="images_final/potato.jpg" alt="Cameraman Convolved with D_x" style="width:400px;height:267px;"/>
                            <figcaption align="center">Potato</figcaption> 
                        </td>
                        <td>
                            <img src="images_final/bricks_smal_potato_texture_transfer.png" alt="Cameraman Convolved with D_x" style="width:400px;height:267px;"/>
                            <figcaption align="center">Bricks Texture Transfer</figcaption> 
                        </td>
                        </tr>
                        <tr> 
                            <!-- <td>
                            <img src="images_final/" alt="Cameraman Convolved with D_x" style="width:450px;height:230px;"/>
                            <figcaption align="center">Sketch Texture Transfer</figcaption> 
                        </td> -->
                        <td>
                            <img src="images_final/white_smal_potato_texture_transfer.png" alt="Cameraman Convolved with D_x" style="width:400px;height:267px;"/>
                            <figcaption align="center">White Small Texture Transfer</figcaption> 
                        </td>
                    </tr>
                </table>

                    <h3>Bells & Whistles</h3>
                    <ul>
                        <li>I worked on a Python version of the cut code. My code is in the ipynb. I looked at cut.m and also at the program methodology described in https://yxw.cs.illinois.edu/course/CS445/F21/projects/quilting/ComputationalPhotography_ProjectQuilting.html for assistance. </li>
                    </ul>


                    <h3>Summary</h3>
                    <p>
                        I learned about how to sample patches smartly to create a image quilt: I learned about how to blend patches together to form a contiguous-patterned image quilt and also how to transfer patch texture to form the pattern of a target image. 
                    </p>

                    <h3>Acknowledgements</h3>
                    <ul>
                        <li>
                            <a href="https://inst.eecs.berkeley.edu/~cs194-26/fa17/hw/proj5/">Project Description for Light Field Camera</a> 
                        </li>
                        <li>
                            <a href="https://courses.engr.illinois.edu/cs445/fa2015/projects/quilting/ComputationalPhotography_ProjectQuilting.html">Project Description for Image Quilting</a> 
                        </li>
                        <li>
                            Chessboard, Jellybean, Bricks, Feynman, Sketch, Text, White Small images all obtained from respective websites.
                        </li>
                        <li>
                            I took the tissue box photos myself.
                        </li>
                        <li>
                            I've obtained the potato, black brick wall, and stone wall images from Google search (using exact/similar terms stated). I obtained the banana from this website http://graphics.cs.cmu.edu/people/efros/research/quilting/results3.html
                        </li>
                        <li>
                            I looked at https://yxw.cs.illinois.edu/course/CS445/F21/projects/quilting/ComputationalPhotography_ProjectQuilting.html.
                        </li>
                    </ul>
                </div>

            </div>

        </div>

    </div>

</body>


</html>
